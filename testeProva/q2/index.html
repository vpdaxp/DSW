<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>Jogo da Memória</title>
</head>
<body>
    <h1>Jogo da Memória (4x4)</h1>
    <section class="memory-game">
        <div class="memory-card" data-framework="lua">
            <img class="front-face" src="https://abrudz.github.io/logos/Lua.svg" alt="Lua">
            <img class="back-face" src="https://abrudz.github.io/logos/JS.svg" alt="JS Logo">
        </div>
        <div class="memory-card" data-framework="lua">
            <img class="front-face" src="https://abrudz.github.io/logos/Lua.svg" alt="Lua">
            <img class="back-face" src="https://abrudz.github.io/logos/JS.svg" alt="JS Logo">
        </div>

        <div class="memory-card" data-framework="cpp">
            <img class="front-face" src="https://abrudz.github.io/logos/CPlusPlus.svg" alt="C++">
            <img class="back-face" src="https://abrudz.github.io/logos/JS.svg" alt="JS Logo">
        </div>
        <div class="memory-card" data-framework="cpp">
            <img class="front-face" src="https://abrudz.github.io/logos/CPlusPlus.svg" alt="C++">
            <img class="back-face" src="https://abrudz.github.io/logos/JS.svg" alt="JS Logo">
        </div>

        <div class="memory-card" data-framework="java">
            <img class="front-face" src="https://abrudz.github.io/logos/Java.svg" alt="Java">
            <img class="back-face" src="https://abrudz.github.io/logos/JS.svg" alt="JS Logo">
        </div>
        <div class="memory-card" data-framework="java">
            <img class="front-face" src="https://abrudz.github.io/logos/Java.svg" alt="Java">
            <img class="back-face" src="https://abrudz.github.io/logos/JS.svg" alt="JS Logo">
        </div>

        <div class="memory-card" data-framework="python">
            <img class="front-face" src="https://abrudz.github.io/logos/Python.svg" alt="Python">
            <img class="back-face" src="https://abrudz.github.io/logos/JS.svg" alt="JS Logo">
        </div>
        <div class="memory-card" data-framework="python">
            <img class="front-face" src="https://abrudz.github.io/logos/Python.svg" alt="Python">
            <img class="back-face" src="https://abrudz.github.io/logos/JS.svg" alt="JS Logo">
        </div>

        <div class="memory-card" data-framework="haskell">
            <img class="front-face" src="https://abrudz.github.io/logos/Haskell.svg" alt="Haskell">
            <img class="back-face" src="https://abrudz.github.io/logos/JS.svg" alt="JS Logo">
        </div>
        <div class="memory-card" data-framework="haskell">
            <img class="front-face" src="https://abrudz.github.io/logos/Haskell.svg" alt="Haskell">
            <img class="back-face" src="https://abrudz.github.io/logos/JS.svg" alt="JS Logo">
        </div>

        <div class="memory-card" data-framework="csharp">
            <img class="front-face" src="https://abrudz.github.io/logos/CSharp.svg" alt="C#">
            <img class="back-face" src="https://abrudz.github.io/logos/JS.svg" alt="JS Logo">
        </div>
        <div class="memory-card" data-framework="csharp">
            <img class="front-face" src="https://abrudz.github.io/logos/CSharp.svg" alt="C#">
            <img class="back-face" src="https://abrudz.github.io/logos/JS.svg" alt="JS Logo">
        </div>

        <div class="memory-card" data-framework="typescript">
            <img class="front-face" src="https://abrudz.github.io/logos/TypeScript.svg" alt="TypeScript">
            <img class="back-face" src="https://abrudz.github.io/logos/JS.svg" alt="JS Logo">
        </div>
        <div class="memory-card" data-framework="typescript">
            <img class="front-face" src="https://abrudz.github.io/logos/TypeScript.svg" alt="TypeScript">
            <img class="back-face" src="https://abrudz.github.io/logos/JS.svg" alt="JS Logo">
        </div>

        <div class="memory-card" data-framework="ruby">
            <img class="front-face" src="https://abrudz.github.io/logos/Ruby.svg" alt="Ruby">
            <img class="back-face" src="https://abrudz.github.io/logos/JS.svg" alt="JS Logo">
        </div>
        <div class="memory-card" data-framework="ruby">
            <img class="front-face" src="https://abrudz.github.io/logos/Ruby.svg" alt="Ruby">
            <img class="back-face" src="https://abrudz.github.io/logos/JS.svg" alt="JS Logo">
        </div>
    </section>
</body>
</html>

<style>
    * {
        padding: 0;
        margin: 0;
        box-sizing: border-box;
    }

    body {
        height: 100vh;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        background: #f0f0f0;
        font-family: Arial, sans-serif;
    }

    h1 {
        margin-bottom: 20px;
        color: #333;
    }
    
    .memory-game {
        width: 440px;
        height: 440px;
        display: grid;
        grid-template-columns: repeat(4, 1fr);
        grid-template-rows: repeat(4, 1fr);
        gap: 10px;
        perspective: 1000px;
    }
    
    .memory-card {
        width: 100px;
        height: 100px;
        position: relative;
        transform-style: preserve-3d;
        transition: transform 0.6s;
        cursor: pointer;
        box-shadow: 0 4px 8px rgba(0,0,0,0.2);
    }

    .memory-card:active {
        transform: scale(0.97);
    }
    
    .memory-card.flip {
        transform: rotateY(180deg);
    }
    
    .front-face, .back-face {
        width: 100%;
        height: 100%;
        padding: 10px;
        position: absolute;
        backface-visibility: hidden; /* Esconde o lado de trás do elemento */
        border-radius: 5px;
        object-fit: contain;
    }
    
    .front-face {
        transform: rotateY(180deg); /* Começa virada */
    }

    .back-face {
        background-color: #252525;
    }
</style>

<script>
    const cards = document.querySelectorAll('.memory-card');

    let hasFlippedCard = false;
    let lockBoard = false;
    let firstCard, secondCard;

    function flipCard() {
        if (lockBoard) return;
        if (this === firstCard) return; // Impede duplo clique na mesma carta

        this.classList.add('flip');

        if (!hasFlippedCard) {
            // Primeiro clique
            hasFlippedCard = true;
            firstCard = this;
            return;
        }

        // Segundo clique
        secondCard = this;
        checkForMatch();
    }

    function checkForMatch() {
        // As cartas são iguais? (compara o data-attribute)
        let isMatch = firstCard.dataset.framework === secondCard.dataset.framework;

        isMatch ? disableCards() : unflipCards();
    }

    function disableCards() {
        // É um par! Remove o evento de clique para não poder virar de novo
        firstCard.removeEventListener('click', flipCard);
        secondCard.removeEventListener('click', flipCard);

        resetBoard();
    }

    function unflipCards() {
        lockBoard = true; // Trava o tabuleiro

        // Não é um par. Vira as cartas de volta após 1.5s
        setTimeout(() => {
            firstCard.classList.remove('flip');
            secondCard.classList.remove('flip');

            resetBoard(); // Destrava o tabuleiro após a animação
        }, 1500);
    }
    
    function resetBoard() {
        [hasFlippedCard, lockBoard] = [false, false];
        [firstCard, secondCard] = [null, null];
    }

    // Função para embaralhar as cartas (IIFE)
    function shuffle() {
        console.log('Embaralhando as cartas...');
        setTimeout(() => {
            console.log('Cartas embaralhadas!');
        }, 1000); // Simula um atraso de 1 segundo para o embaralhamento
        cards.forEach(card => {
            let randomPos = Math.floor(Math.random() * 16);
            card.style.order = randomPos;
        });
    };
    
    // Adiciona o evento de clique a cada carta
    cards.forEach(card => card.addEventListener('click', flipCard));

    function checkGameOver() {
        const flippedCards = document.querySelectorAll('.memory-card.flip');
        if (flippedCards.length === cards.length) {
            setTimeout(() => {
                alert('Parabéns! Você encontrou todos os pares!');
                resetGame();
            }, 2000);
        }
    }

    function resetGame() {
        cards.forEach(card => {
            card.classList.remove('flip');
            card.addEventListener('click', flipCard);
        });
        resetBoard();
        shuffle(); // Embaralha as cartas novamente
        console.log('Jogo reiniciado!');
    }
    

    // Verifica o estado do jogo após cada par encontrado
    function disableCards() {
        firstCard.removeEventListener('click', flipCard);
        secondCard.removeEventListener('click', flipCard);

        resetBoard();
        checkGameOver();
    }
</script>